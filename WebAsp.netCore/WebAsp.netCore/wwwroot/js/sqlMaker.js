const getSqlType = () => { return document.getElementById('sqlType').value; }

var currentTable = 'MySQL';


//MySql
const getMySqlTransferFromCheckBox = (item) => {
    switch (item.headers) {
        case "pk": return "PRIMARY KEY ";
        case "nn": return "NOT NULL ";
        case "uq": return "UNIQUE ";
        case "b":  return "BINARY ";
        case "zf": return "(Input Size Number) ZEROFILL ";
        case "ai": return "AUTO_INCREMENT ";
        case "g":  return "GENERATED ALWAYS AS (Input your data on here (ex lastName + firstName)) ";
    }
    return "";
}

//MsSql
const getMsSqlTransferFromCheckBox = (item) => {
    switch (item.headers) {
        case "pk": return "PRIMARY KEY ";
        case "nn": return "NOT NULL ";
        case "uq": return "UNIQUE ";
        case "ai": return "IDENTITY(1,1) ";
    }
    return "";
}

//Oracle
const getOracleTransferFromCheckBox = (item) => {
    switch (item.headers) {
        case "pk": return "PRIMARY KEY ";
        case "nn": return "NOT NULL ";
        case "uq": return "UNIQUE ";
        case "ai": return "GENERATED BY DEFAULT AS IDENTITY ";
    }
    return "";
}

//SQLServer
const getSQLServerTransferFromCheckBox = (item) => {
    switch (item.headers) {
        case "pk": return "PRIMARY KEY ";
        case "nn": return "NOT NULL ";
        case "uq": return "UNIQUE ";
        case "ai": return "IDENTITY(1,1) ";
    }
    return "";
}

const getQueryFromCheckBoxChecked = (item) => {

    switch (getSqlType()) {
        case "MySQL": return getMySqlTransferFromCheckBox(item);
        case "MsSQL": return getMsSqlTransferFromCheckBox(item);
        case "Oracle": return getOracleTransferFromCheckBox(item);
        case "SQLServer": return getSQLServerTransferFromCheckBox(item);
    }
    return "";
}

const getCreateTableSQLCode = () => {

    let tableMaker = document.getElementById(getSqlType() + 'tableMaker').children.item(0);
    let tableName = document.getElementById('tableName').value;
    //ForSave
    var rowList = [[], [], [], [], [], [], [], [], [], []];
    var result = "CREATE TABLE " + tableName + "(<br>";
    var cookieResult = tableName + "=" + currentTable + "/";

    for (var i = 1; i < tableMaker.children.length; i++) {
        let row = tableMaker.children.item(i);
        result += "&ensp;&emsp;";
        for (var j = 0; j < row.children.length; j++) {
            if (row.children.item(j).children.item(0).getAttribute("type") == "checkbox") {
                var isChecked = row.children.item(j).children.item(0).checked;
                if (isChecked == true) {
                    result += getQueryFromCheckBoxChecked(row.children.item(j));
                }
                cookieResult += isChecked == true? '1' : '0' + "/";
                rowList[j].push(row.children.item(j).children.item(0).checked);

            }
            else if (row.children.item(j).children.item(0).getAttribute("type") == "text") {
                cookieResult += row.children.item(j).children.item(0).value + "/";
                result = result + row.children.item(j).children.item(0).value + " ";
                rowList[j].push(row.children.item(j).children.item(0).value);
            }
        }
        result += ",<br>";
    }
    result = result.slice(0, result.length - 5) + "<br>);";
    document.getElementById("resultSql").innerHTML = result;
    cookieResult += "; path=/;";
    document.cookie = cookieResult;
    getCookie();
    
}

const tableDisplayChangeAsTableType = (element) => {

    if (element.value == currentTable)
        return; 
    document.getElementById(currentTable + 'Table').style.display = 'none';
    currentTable = element.value;
    document.getElementById(currentTable + 'Table').style.display = 'block';
}


